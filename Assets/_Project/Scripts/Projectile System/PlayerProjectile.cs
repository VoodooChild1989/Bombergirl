using System;
using System.Linq;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;
using UnityEngine.Playables;
using TMPro;

public class PlayerProjectile : Projectile
{

    #region LIFE CYCLE METHODS

        /// <summary>
        /// Called when the script instance is being loaded.
        /// Useful for initialization before the game starts.
        /// </summary>
        void Awake()
        {
            base.Awake(); 
            gameObject.layer = LayerMask.NameToLayer("Player_Projectile");
        }

        /// <summary>
        /// Called before the first frame update.
        /// Useful for initialization once the game starts.
        /// </summary>
        void Start()
        {
            // Perform initial setup that occurs when the game starts.
            // Example: Initialize game state, start coroutines, load resources, etc.
            
            // Example of starting a coroutine.
            // StartCoroutine(ExampleCoroutine());
        }

        /// <summary>
        /// Called once per frame.
        /// Use for logic that needs to run every frame, such as user input or animations.
        /// </summary>
        void Update()
        {
            // Add your per-frame logic here.
            // Example: Move objects, check user input, update animations, etc.
        }

        /// <summary>
        /// Called at fixed intervals, ideal for physics updates.
        /// Use this for physics-related updates like applying forces or handling Rigidbody physics.
        /// </summary>
        void FixedUpdate()
        {
            base.FixedUpdate();

            SetDirection();
        }

    #endregion

    #region CUSTOM METHODS

        /// <summary>
        /// Sent when an incoming collider makes contact with this object's
        /// collider (2D physics only).
        /// </summary>
        /// <param name="other">The Collision2D data associated with this collision.</param>
        public override void OnCollisionEnter2D(Collision2D other)
        {
            if(other.gameObject.CompareTag("Cell"))
            {
                PlatformerCell cellScript = other.gameObject.GetComponent<PlatformerCell>();
                cellScript.DamageCell(damageAmount);
            }
            else if(other.gameObject.CompareTag("Enemy"))
            {
                IDamagable interfaceScript = other.gameObject.GetComponent<IDamagable>();
                if(interfaceScript != null) interfaceScript.TakeDamage(damageAmount);
            }
            
            Destruction();
        }

        /// <summary>
        /// An example coroutine that waits for 2 seconds.
        /// </summary>
        IEnumerator ExampleCoroutine()
        {
            // Wait for 2 seconds before executing further code.
            yield return new WaitForSeconds(2f);

            Debug.Log("Action after 2 seconds.");
        }

    #endregion

}